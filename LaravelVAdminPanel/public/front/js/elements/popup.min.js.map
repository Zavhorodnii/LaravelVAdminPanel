{"version":3,"sources":["elements/popup.js"],"names":["popupLinks","document","querySelectorAll","body","querySelector","lockPadding","unlock","timeout","length","index","popupLink","addEventListener","e","popupName","getAttribute","replace","popupOpen","getElementById","preventDefault","popupCloseIcon","el","popupClose","closest","curentPopup","popupActive","bodyLock","classList","add","target","doUnlock","remove","bodyUnLock","lockPaddingValue","window","innerWidth","offsetWidth","style","paddingRight","setTimeout","which","Element","prototype","css","node","this","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],"mappings":"AAAA,MAAMA,WAAaC,SAASC,iBAAiB,eACvCC,KAAOF,SAASG,cAAc,QAC9BC,YAAcJ,SAASC,iBAAiB,iBAE9C,IAAII,QAAS,EAEb,MAAMC,QAAU,IAEhB,GAAIP,WAAWQ,OAAS,EACtB,IAAK,IAAIC,EAAQ,EAAGA,EAAQT,WAAWQ,OAAQC,IAAS,CACtD,MAAMC,EAAYV,WAAWS,GAC7BC,EAAUC,iBAAiB,SAAS,SAAUC,GAC5C,MAAMC,EAAYH,EAAUI,aAAa,QAAQC,QAAQ,IAAK,IAE9DC,UADoBf,SAASgB,eAAeJ,IAE5CD,EAAEM,oBAIR,MAAMC,eAAiBlB,SAASC,iBAAiB,gBACjD,GAAIiB,eAAeX,OAAS,EAC1B,IAAK,IAAIC,EAAQ,EAAGA,EAAQU,eAAeX,OAAQC,IAAS,CAC1D,MAAMW,EAAKD,eAAeV,GAC1BW,EAAGT,iBAAiB,SAAS,SAAUC,GACrCS,WAAWD,EAAGE,QAAQ,WACtBV,EAAEM,oBAKR,SAASF,UAAUO,GACjB,GAAIA,GAAejB,OAAQ,CACzB,MAAMkB,EAAcvB,SAASG,cAAc,eACvCoB,EACFH,WAAWG,GAAa,GAExBC,WAEFF,EAAYG,UAAUC,IAAI,QAC1BJ,EAAYZ,iBAAiB,SAAS,SAAUC,GACzCA,EAAEgB,OAAON,QAAQ,oBACpBD,WAAWT,EAAEgB,OAAON,QAAQ,eAMpC,SAASD,WAAWG,EAAaK,GAAW,GACtCvB,SACFkB,EAAYE,UAAUI,OAAO,QACzBD,GACFE,cAKN,SAASN,WACP,MAAMO,EAAmBC,OAAOC,WAAajC,SAASG,cAAc,YAAY+B,YAAc,KAE9F,GAAI9B,YAAYG,OAAS,EACvB,IAAK,IAAIC,EAAQ,EAAGA,EAAQJ,YAAYG,OAAQC,IAAS,CAC5CJ,YAAYI,GACpB2B,MAAMC,aAAeL,EAG5B7B,KAAKiC,MAAMC,aAAeL,EAC1B7B,KAAKuB,UAAUC,IAAI,QAEnBrB,QAAS,EACTgC,YAAW,WACThC,QAAS,IAhEG,KAoEhB,SAASyB,aACPO,YAAW,WACT,GAAIjC,YAAYG,OAAS,EACvB,IAAK,IAAIC,EAAQ,EAAGA,EAAQJ,YAAYG,OAAQC,IAAS,CAC5CJ,YAAYI,GACpB2B,MAAMC,aAAe,MAG5BlC,KAAKiC,MAAMC,aAAe,MAC1BlC,KAAKuB,UAAUI,OAAO,UA7EV,KAgFdxB,QAAS,EACTgC,YAAW,WACThC,QAAS,IAlFG,KAsFhBL,SAASU,iBAAiB,WAAW,SAAUC,GAC7C,GAAgB,KAAZA,EAAE2B,MAAc,CAElBlB,WADoBpB,SAASG,cAAc,oBAOxCoC,QAAQC,UAAUnB,UAErBkB,QAAQC,UAAUnB,QAAU,SAAUoB,GAEpC,IADA,IAAIC,EAAOC,KACJD,GAAM,CACX,GAAIA,EAAKE,QAAQH,GAAM,OAAOC,EACzBA,EAAOA,EAAKG,cAEnB,OAAO,OAMNN,QAAQC,UAAUI,UAErBL,QAAQC,UAAUI,QAAUL,QAAQC,UAAUM,iBAC5CP,QAAQC,UAAUO,uBAClBR,QAAQC,UAAUQ,oBAClBT,QAAQC,UAAUS","file":"popup.min.js","sourcesContent":["const popupLinks = document.querySelectorAll('.popup-link');\r\nconst body = document.querySelector('body');\r\nconst lockPadding = document.querySelectorAll(\".lock-padding\");\r\n\r\nlet unlock = true;\r\n\r\nconst timeout = 800;\r\n\r\nif (popupLinks.length > 0) {\r\n  for (let index = 0; index < popupLinks.length; index++) {\r\n    const popupLink = popupLinks[index];\r\n    popupLink.addEventListener(\"click\", function (e) {\r\n      const popupName = popupLink.getAttribute('href').replace('#', '');\r\n      const curentPopup = document.getElementById(popupName);\r\n      popupOpen(curentPopup);\r\n      e.preventDefault();\r\n    });\r\n  }\r\n}\r\nconst popupCloseIcon = document.querySelectorAll('.close-popup');\r\nif (popupCloseIcon.length > 0) {\r\n  for (let index = 0; index < popupCloseIcon.length; index++) {\r\n    const el = popupCloseIcon[index];\r\n    el.addEventListener('click', function (e) {\r\n      popupClose(el.closest('.popup'));\r\n      e.preventDefault();\r\n    });\r\n  }\r\n}\r\n\r\nfunction popupOpen(curentPopup) {\r\n  if (curentPopup && unlock) {\r\n    const popupActive = document.querySelector('.popup.open');\r\n    if (popupActive) {\r\n      popupClose(popupActive, false);\r\n    } else {\r\n      bodyLock();\r\n    }\r\n    curentPopup.classList.add('open');\r\n    curentPopup.addEventListener(\"click\", function (e) {\r\n      if (!e.target.closest('.popup__content')) {\r\n        popupClose(e.target.closest('.popup'));\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction popupClose(popupActive, doUnlock = true) {\r\n  if (unlock) {\r\n    popupActive.classList.remove('open');\r\n    if (doUnlock) {\r\n      bodyUnLock();\r\n    }\r\n  }\r\n}\r\n\r\nfunction bodyLock() {\r\n  const lockPaddingValue = window.innerWidth - document.querySelector('.wrapper').offsetWidth + 'px';\r\n\r\n  if (lockPadding.length > 0) {\r\n    for (let index = 0; index < lockPadding.length; index++) {\r\n      const el = lockPadding[index];\r\n      el.style.paddingRight = lockPaddingValue;\r\n    }\r\n  }\r\n  body.style.paddingRight = lockPaddingValue;\r\n  body.classList.add('lock');\r\n\r\n  unlock = false;\r\n  setTimeout(function () {\r\n    unlock = true;\r\n  }, timeout);\r\n}\r\n\r\nfunction bodyUnLock() {\r\n  setTimeout(function () {\r\n    if (lockPadding.length > 0) {\r\n      for (let index = 0; index < lockPadding.length; index++) {\r\n        const el = lockPadding[index];\r\n        el.style.paddingRight = '0px';\r\n      }\r\n    }\r\n    body.style.paddingRight = '0px';\r\n    body.classList.remove('lock');\r\n  }, timeout);\r\n\r\n  unlock = false;\r\n  setTimeout(function () {\r\n    unlock = true;\r\n  }, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n  if (e.which === 27) {\r\n    const popupActive = document.querySelector('.popup.open');\r\n    popupClose(popupActive);\r\n  }\r\n});\r\n\r\n(function () {\r\n  // проверяем поддержку\r\n  if (!Element.prototype.closest) {\r\n    // реализуем\r\n    Element.prototype.closest = function (css) {\r\n      var node = this;\r\n      while (node) {\r\n        if (node.matches(css)) return node;\r\n        else node = node.parentElement;\r\n      }\r\n      return null;\r\n    };\r\n  }\r\n})();\r\n(function () {\r\n  // проверяем поддержку\r\n  if (!Element.prototype.matches) {\r\n    // определяем свойство\r\n    Element.prototype.matches = Element.prototype.matchesSelector ||\r\n      Element.prototype.webkitMatchesSelector ||\r\n      Element.prototype.mozMatchesSelector ||\r\n      Element.prototype.msMatchesSelector;\r\n  }\r\n})();\r\n"]}